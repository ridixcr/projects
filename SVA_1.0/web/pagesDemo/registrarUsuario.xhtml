<?xml version='1.0' encoding='UTF-8' ?>
<!DOCTYPE html PUBLIC "-//W3C//DTD XHTML 1.0 Transitional//EN" "http://www.w3.org/TR/xhtml1/DTD/xhtml1-transitional.dtd">
<html xmlns="http://www.w3.org/1999/xhtml"
      xmlns:ui="http://xmlns.jcp.org/jsf/facelets"
      xmlns:p="http://primefaces.org/ui"
      xmlns:h="http://xmlns.jcp.org/jsf/html"
      xmlns:f="http://xmlns.jcp.org/jsf/core">

    <body>

        <ui:composition template="./../template/layoutLogin.xhtml">

            <ui:define name="content">
                <div class="regUsuario">

                    <p:growl id="growl" showDetail="true" />

                    <h:form id="formUsuario">
                        <p:panel id="pnl_newUser" header="Registrar nuevo usuario">

                            <h:panelGrid id="grid_autoevaluacion" columns="2" cellpadding="2">
                                <h:outputLabel for="cbx_autoevaluacion" value="Proceso de autoevaluación: " style="font-weight:bold"/>
                                <p:selectOneMenu id="cbx_autoevaluacion" required="true" label="Autoevaluación" style="width:310px" 
                                                 value="#{personaControler.persona.autoevaluacion.idautoevaluacion}">
                                    <f:selectItem itemLabel="-- Seleccione --" itemValue="" noSelectionOption="true" />
                                    <f:selectItems value="#{autoevaluacionBean.selectOneItemsAutoevaluacion}" />
                                </p:selectOneMenu>
                            </h:panelGrid><br/>
                            <p:wizard id="wizard" nextLabel="Siguiente" backLabel="Atras" widgetVar="wizard">
                                <p:tab id="tab_datos_personales" title="Personal">
                                    <p:messages id="msjGeneral" autoUpdate="true" closable="true" />
                                    <p:panel id="pnl_datos_personales" header="Datos personales">
                                        <h:panelGrid id="grid_datos_personales" columns="2" cellpadding="2" columnClasses="label, value">
                                            <h:outputLabel for="txf_nombres" value="Nombres: *" style="font-weight:bold"/>                            
                                            <p:inputText id="txf_nombres" required="true" placeholder="NOMBRES" size="40" label="Nombres"
                                                         valupersonaControleraBean.persona.nombres}"/>

                                            <h:outputLabel for="txf_ape_paterno" value="Apellido paterno: *" style="font-weight:bold"/>
                                            <p:inputText id="txf_ape_paterno" required="true" placeholder="APELLIDO PATERNO" size="40" 
                                                         label="Apellido paterno"personaControlerersonaBean.persona.apellidoPaterno}"/>

                                            <h:outputLabel for="txf_ape_materno" value="Apellido materno: *" style="font-weight:bold"/>
                                            <p:inputText id="txf_ape_materno" required="true" placeholder="APELLIDO MATERNO" size="40" 
                                                         label="Apellido matpersonaControler="#{personaBean.persona.apellidoMaterno}"/>

                                            <h:outputLabel for="txf_dni" value="Nº DNI: *" style="font-weight:bold"/>
                                            <p:inputText id="txf_dni" required="true" placeholder="DNI" size="25" maxlength="8" 
                                                         label="NumepersonaControlervalue="#{personaBean.persona.dni}"/>

                                            <h:outputLabel for="cbx_genero" value="Genero: " style="font-weight:bold"/>
                                            <p:selectOneMenu id="cbx_genero" label="Género" style="width:176px"
                                             personaControler     value="#{personaBean.persona.genero}">
                                                <f:selectItem itemLabel="-- Seleccione --" itemValue="" noSelectionOption="true" />
                                                <f:selectItem itemLabel="Masculino" itemValue="M"/>
                                                <f:selectItem itemLabel="Femenino" itemValue="F"/>
                                            </p:selectOneMenu>

                                            <h:outputLabel for="txf_fecha_nacimiento" value="Fecha de nacimiento: " style="font-weight:bold"/>
                                            <p:calendar id="txf_fecha_nacimiento" class="calendar" showOn="button" effect="fold" navigator="true" 
                                                        pattern="dd/MM/yyyy" placeholder="dd/mm/aaaa">
                                                <f:convertDateTime type="date"  dateStyle="short" pattern="dd/MM/yyyy" />
                                            </p:calendar>

                                        </h:panelGrid>
                                    </p:panel>                                
                                </p:tab> 

                                <p:tab id="tab_datos_contacto" title="Contacto">
                                    <p:messages id="msjGeneral2" autoUpdate="true" closable="true" />
                                    <p:panel id="pnl_datos_contacto" header="Datos de contacto">
                                        <h:panelGrid id="grid_datos_contacto" columns="2" cellpadding="2" columnClasses="label, value">
                                            <h:outputLabel for="txf_direccion" value="Dirección: " style="font-weight:bold"/>
                                            <p:inputText id="txf_direccion"  placeholder="DIRECCION" size="40" label="Dirección" 
                                    personaControler          value="#{personaBean.persona.direccion}"/>

                                            <h:outputLabel for="txf_telefono" value="Teléfono: " style="font-weight:bold"/>
                                            <p:inputText id="txf_telefono" placeholder="TELEFONO" size="40" label="Telefono" 
                               personaControler               value="#{personaBean.persona.telefono}"/>

                                            <h:outputLabel for="txf_correo" value="Correo electrónico: " style="font-weight:bold"/>
                                            <p:inputText id="txf_correo" placeholder="CORREO ELECTRONICO" size="40" label="Correo electrónico" 
                          personaControler                    value="#{personaBean.persona.correo}"/>

                                        </h:panelGrid>
                                    </p:panel>                                
                                </p:tab>

                                <p:tab id="tab_datos_usuario" title="Usuario">

                                    <p:panel id="pnl_datos_usuario" header="Datos de usuario">
                                        <p:messages id="msjGeneral3" autoUpdate="true" closable="true" />
                                        <h:panelGrid id="grid_datos_usuario" columns="2" cellpadding="2" columnClasses="label, value">
                                            <h:outputLabel for="cbx_rol" value="Usuario: *" style="font-weight:bold"/>
                                            <p:selectOneMepersonaControlerrol" style="width:180px" value="#{personaBean.persona.tipoUsuario}" 
                                                             label="Tipo de usuario" required="true">
                                                <f:selectItem itemLabel="-- Seleccione --" itemValue="" noSelectionOption="true" />
                                                <f:selectItem itemLabel="Alumno" itemValue="A"/>
                                                <f:selectItem itemLabel="Docente" itemValue="D"/>
                                                <f:selectItem itemLabel="Egresado" itemValue="E"/>
                                                <f:selectItem itemLabel="Admisnistrativo" itemValue="AD"/>
                                            </p:selectOneMenu>
                                            <h:outputLabel for="txf_usuario" value="Nombre de usuario: *" style="font-weight:bold"/>                            
                                            <p:inputText id="txf_usuario" required="true" placeholder="NOMBRE DE USUARIO" size="40" label="Nombre de usuario"
                personaControler                              value="#{personaBean.usuario.nombreUsuario}"/>

                                            <h:outputLabel for="txf_contrasenia" value="Contraseña: *" style="font-weight:bold"/>
                                            <p:password id="txf_contrasenia" required="true" placeholder="CONTRASEÑA" size="40" label="Contraseña"
          personaControler                                   value="#{personaBean.usuario.contrasenia}"/>

                                            <h:outputLabel for="txf_conf_contrasenia" value="Confirmar contraseña: *" style="font-weight:bold"/>
                                            <p:password id="txf_conf_contrasenia" required="true" placeholder="CONFIRMAR CONTRASEÑA" size="40" label="Confirmar contraseña"
     personaControler                                        value="#{personaBean.confContrasenia}"/>

                                        </h:panelGrid>
                                    </p:panel>                                
                                </p:tab>

                                <p:tab id="tab_datos_conf" title="Confirmación">
                                    <p:panel header="Resumen de datos">
                                        <h:panelGrid id="Confitmation" columns="2" columnClasses="grid,grid">
                                            <h:panelGrid columns="2" columnClasses="label, value">
                                                <h:outputText value="Nombres: " />
                                                <h:outputTextpersonaControlerersonaBean.persona.nombres}" styleClass="outputLabel"/>

                                                <h:outputText value="Apellido Paterno: " />
                                                <h:personaControlervalue="#{personaBean.persona.apellidoPaterno}" styleClass="outputLabel"/>

                                                <h:outputText value="Apellido Materno: " />
                                         personaControlerutputText value="#{personaBean.persona.apellidoMaterno}" styleClass="outputLabel"/>

                                                <h:outputText value="Nº DNI: " />
                               personaControler      <h:outputText value="#{personaBean.persona.dni}" styleClass="outputLabel"/>

                                                <h:outputText value="Fecha de nacimiento: " />
                                                <h:outputText styleClass="outputLabel"/>                                                

                                            </h:panelGrid>

                                            <h:panelGrid columns="2" columnClasses="label, value">
                                                <h:outputText value="Género: " />
                     personaControler                <h:outputText value="#{personaBean.persona.genero}" styleClass="outputLabel"/>

                                                <h:outputText value="Dirección: " />
           personaControler                          <h:outputText value="#{personaBean.persona.direccion}" styleClass="outputLabel"/>

                                                <h:outputText value="Telefono: " />
 personaControler                                    <h:outputText value="#{personaBean.persona.telefono}" styleClass="outputLabel"/>

                                                <h:outputText value="CorrpersonaControler                                              <h:outputText value="#{personaBean.persona.correo}" styleClass="outputLabel"/>

                                                <personaControlert value="Usuario: " />
                                                <h:outputText value="#{personaBean.confContrasenia}" styleClass="outputLabel"/> 
                                            </h:panelGrid>
                                        </h:panelGrid>
                                        <f:facet name="footer">
                                            <p:commandButton value="Iniciar Sesión" icon="icon-lock" style="margin-right:10px"
                                                             action="index"/>
                                            <p:commandButton value="Guardar" update=":growl" icon="icon-guardar" style="mapersonaControler10px; float: right"
                                                             actionListener="#{personaBean.registrar()}"/>
                                        </f:facet>
                                    </p:panel>

                                </p:tab>

                            </p:wizard> 

                        </p:panel>

                    </h:form>
                    <script type="text/javascript">
                        /**
                         * Faces Validator
                         */
                        PrimeFaces.validator['custom.emailValidator'] = {
                            pattern: /\S+@\S+/,
                            validate: function(element, value) {
                                //use element.data() to access validation metadata, in this case there is none.
                                if (!this.pattern.test(value)) {
                                    throw {
                                        summary: 'Error de validación',
                                        detail: value + ' No es un correo válido.'
                                    }
                                }
                            }
                        };
                    </script>
                </div>

            </ui:define>

        </ui:composition>

    </body>
</html>
